{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prati\\\\OneDrive\\\\Desktop\\\\expense-tracker\\\\frontend\\\\src\\\\components\\\\Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport AddTransaction from \"./AddTransaction\";\nimport TransactionList from \"./TransactionList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Dashboard({\n  user,\n  apiBase,\n  onUpdateUser\n}) {\n  _s();\n  const [transactions, setTransactions] = useState([]);\n  const [balance, setBalance] = useState(user.balance || 0);\n  const userId = user.id;\n  useEffect(() => {\n    fetchTransactions();\n    fetchBalance();\n    // eslint-disable-next-line\n  }, []);\n  async function fetchTransactions() {\n    const res = await fetch(`${apiBase}/api/transactions?userId=${userId}`);\n    const d = await res.json();\n    if (res.ok) setTransactions(d.transactions || []);\n  }\n  async function fetchBalance() {\n    const res = await fetch(`${apiBase}/api/balance?userId=${userId}`);\n    const d = await res.json();\n    if (res.ok) {\n      setBalance(d.balance);\n      onUpdateUser({\n        ...user,\n        balance: d.balance\n      });\n    }\n  }\n  async function addTransaction(tx) {\n    const res = await fetch(`${apiBase}/api/transactions`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        ...tx,\n        userId\n      })\n    });\n    const d = await res.json();\n    if (res.ok) {\n      setTransactions(prev => [d.transaction, ...prev]);\n      setBalance(d.balance);\n      onUpdateUser({\n        ...user,\n        balance: d.balance\n      });\n    } else {\n      alert(d.error || \"Failed\");\n    }\n  }\n  async function deleteTransaction(txId) {\n    const res = await fetch(`${apiBase}/api/transactions`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        txId,\n        userId\n      })\n    });\n    const d = await res.json();\n    if (res.ok) {\n      setTransactions(prev => prev.filter(t => t.id !== txId));\n      setBalance(d.balance);\n      onUpdateUser({\n        ...user,\n        balance: d.balance\n      });\n    } else alert(d.error || \"Delete failed\");\n  }\n  async function topUp(amount) {\n    const res = await fetch(`${apiBase}/api/balance`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        userId,\n        amount\n      })\n    });\n    const d = await res.json();\n    if (res.ok) {\n      setBalance(d.balance);\n      onUpdateUser({\n        ...user,\n        balance: d.balance\n      });\n    } else alert(d.error || \"Top-up failed\");\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small-muted\",\n          children: \"Hello\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 700\n          },\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small-muted\",\n          children: \"Balance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 700\n          },\n          children: [\"\\u20B9 \", balance.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: /*#__PURE__*/_jsxDEV(AddTransaction, {\n          onAdd: addTransaction,\n          onTopUp: topUp\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: /*#__PURE__*/_jsxDEV(TransactionList, {\n          transactions: transactions,\n          onDelete: deleteTransaction\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"TgqlJs2255mlcUq/JH67EodLvmQ=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","AddTransaction","TransactionList","jsxDEV","_jsxDEV","Dashboard","user","apiBase","onUpdateUser","_s","transactions","setTransactions","balance","setBalance","userId","id","fetchTransactions","fetchBalance","res","fetch","d","json","ok","addTransaction","tx","method","headers","body","JSON","stringify","prev","transaction","alert","error","deleteTransaction","txId","filter","t","topUp","amount","children","className","fileName","_jsxFileName","lineNumber","columnNumber","style","fontSize","fontWeight","name","toFixed","onAdd","onTopUp","onDelete","_c","$RefreshReg$"],"sources":["C:/Users/prati/OneDrive/Desktop/expense-tracker/frontend/src/components/Dashboard.jsx"],"sourcesContent":[" \r\nimport React, { useEffect, useState } from \"react\";\r\nimport AddTransaction from \"./AddTransaction\";\r\nimport TransactionList from \"./TransactionList\";\r\n\r\nexport default function Dashboard({ user, apiBase, onUpdateUser }) {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [balance, setBalance] = useState(user.balance || 0);\r\n  const userId = user.id;\r\n\r\n  useEffect(() => {\r\n    fetchTransactions();\r\n    fetchBalance();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  async function fetchTransactions() {\r\n    const res = await fetch(`${apiBase}/api/transactions?userId=${userId}`);\r\n    const d = await res.json();\r\n    if (res.ok) setTransactions(d.transactions || []);\r\n  }\r\n\r\n  async function fetchBalance() {\r\n    const res = await fetch(`${apiBase}/api/balance?userId=${userId}`);\r\n    const d = await res.json();\r\n    if (res.ok) {\r\n      setBalance(d.balance);\r\n      onUpdateUser({ ...user, balance: d.balance });\r\n    }\r\n  }\r\n\r\n  async function addTransaction(tx) {\r\n    const res = await fetch(`${apiBase}/api/transactions`, {\r\n      method: \"POST\",\r\n      headers: {\"Content-Type\":\"application/json\"},\r\n      body: JSON.stringify({ ...tx, userId })\r\n    });\r\n    const d = await res.json();\r\n    if (res.ok) {\r\n      setTransactions(prev => [d.transaction, ...prev]);\r\n      setBalance(d.balance);\r\n      onUpdateUser({ ...user, balance: d.balance });\r\n    } else {\r\n      alert(d.error || \"Failed\");\r\n    }\r\n  }\r\n\r\n  async function deleteTransaction(txId) {\r\n    const res = await fetch(`${apiBase}/api/transactions`, {\r\n      method: \"DELETE\",\r\n      headers: {\"Content-Type\":\"application/json\"},\r\n      body: JSON.stringify({ txId, userId })\r\n    });\r\n    const d = await res.json();\r\n    if (res.ok) {\r\n      setTransactions(prev => prev.filter(t => t.id !== txId));\r\n      setBalance(d.balance);\r\n      onUpdateUser({ ...user, balance: d.balance });\r\n    } else alert(d.error || \"Delete failed\");\r\n  }\r\n\r\n  async function topUp(amount) {\r\n    const res = await fetch(`${apiBase}/api/balance`, {\r\n      method: \"PUT\",\r\n      headers: {\"Content-Type\":\"application/json\"},\r\n      body: JSON.stringify({ userId, amount })\r\n    });\r\n    const d = await res.json();\r\n    if (res.ok) {\r\n      setBalance(d.balance);\r\n      onUpdateUser({ ...user, balance: d.balance });\r\n    } else alert(d.error || \"Top-up failed\");\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"top-stats\">\r\n        <div className=\"stat card\">\r\n          <div className=\"small-muted\">Hello</div>\r\n          <div style={{fontSize:20,fontWeight:700}}>{user.name}</div>\r\n        </div>\r\n        <div className=\"stat card\">\r\n          <div className=\"small-muted\">Balance</div>\r\n          <div style={{fontSize:20,fontWeight:700}}>â‚¹ {balance.toFixed(2)}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <AddTransaction onAdd={addTransaction} onTopUp={topUp} />\r\n        </div>\r\n        <div className=\"col\">\r\n          <TransactionList transactions={transactions} onDelete={deleteTransaction} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,eAAe,MAAM,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,eAAe,SAASC,SAASA,CAAC;EAAEC,IAAI;EAAEC,OAAO;EAAEC;AAAa,CAAC,EAAE;EAAAC,EAAA;EACjE,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAACM,IAAI,CAACM,OAAO,IAAI,CAAC,CAAC;EACzD,MAAME,MAAM,GAAGR,IAAI,CAACS,EAAE;EAEtBhB,SAAS,CAAC,MAAM;IACdiB,iBAAiB,CAAC,CAAC;IACnBC,YAAY,CAAC,CAAC;IACd;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,eAAeD,iBAAiBA,CAAA,EAAG;IACjC,MAAME,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGZ,OAAO,4BAA4BO,MAAM,EAAE,CAAC;IACvE,MAAMM,CAAC,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;IAC1B,IAAIH,GAAG,CAACI,EAAE,EAAEX,eAAe,CAACS,CAAC,CAACV,YAAY,IAAI,EAAE,CAAC;EACnD;EAEA,eAAeO,YAAYA,CAAA,EAAG;IAC5B,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGZ,OAAO,uBAAuBO,MAAM,EAAE,CAAC;IAClE,MAAMM,CAAC,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;IAC1B,IAAIH,GAAG,CAACI,EAAE,EAAE;MACVT,UAAU,CAACO,CAAC,CAACR,OAAO,CAAC;MACrBJ,YAAY,CAAC;QAAE,GAAGF,IAAI;QAAEM,OAAO,EAAEQ,CAAC,CAACR;MAAQ,CAAC,CAAC;IAC/C;EACF;EAEA,eAAeW,cAAcA,CAACC,EAAE,EAAE;IAChC,MAAMN,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGZ,OAAO,mBAAmB,EAAE;MACrDkB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAC,cAAc,EAAC;MAAkB,CAAC;MAC5CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAE,GAAGL,EAAE;QAAEV;MAAO,CAAC;IACxC,CAAC,CAAC;IACF,MAAMM,CAAC,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;IAC1B,IAAIH,GAAG,CAACI,EAAE,EAAE;MACVX,eAAe,CAACmB,IAAI,IAAI,CAACV,CAAC,CAACW,WAAW,EAAE,GAAGD,IAAI,CAAC,CAAC;MACjDjB,UAAU,CAACO,CAAC,CAACR,OAAO,CAAC;MACrBJ,YAAY,CAAC;QAAE,GAAGF,IAAI;QAAEM,OAAO,EAAEQ,CAAC,CAACR;MAAQ,CAAC,CAAC;IAC/C,CAAC,MAAM;MACLoB,KAAK,CAACZ,CAAC,CAACa,KAAK,IAAI,QAAQ,CAAC;IAC5B;EACF;EAEA,eAAeC,iBAAiBA,CAACC,IAAI,EAAE;IACrC,MAAMjB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGZ,OAAO,mBAAmB,EAAE;MACrDkB,MAAM,EAAE,QAAQ;MAChBC,OAAO,EAAE;QAAC,cAAc,EAAC;MAAkB,CAAC;MAC5CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEM,IAAI;QAAErB;MAAO,CAAC;IACvC,CAAC,CAAC;IACF,MAAMM,CAAC,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;IAC1B,IAAIH,GAAG,CAACI,EAAE,EAAE;MACVX,eAAe,CAACmB,IAAI,IAAIA,IAAI,CAACM,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACtB,EAAE,KAAKoB,IAAI,CAAC,CAAC;MACxDtB,UAAU,CAACO,CAAC,CAACR,OAAO,CAAC;MACrBJ,YAAY,CAAC;QAAE,GAAGF,IAAI;QAAEM,OAAO,EAAEQ,CAAC,CAACR;MAAQ,CAAC,CAAC;IAC/C,CAAC,MAAMoB,KAAK,CAACZ,CAAC,CAACa,KAAK,IAAI,eAAe,CAAC;EAC1C;EAEA,eAAeK,KAAKA,CAACC,MAAM,EAAE;IAC3B,MAAMrB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGZ,OAAO,cAAc,EAAE;MAChDkB,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QAAC,cAAc,EAAC;MAAkB,CAAC;MAC5CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEf,MAAM;QAAEyB;MAAO,CAAC;IACzC,CAAC,CAAC;IACF,MAAMnB,CAAC,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;IAC1B,IAAIH,GAAG,CAACI,EAAE,EAAE;MACVT,UAAU,CAACO,CAAC,CAACR,OAAO,CAAC;MACrBJ,YAAY,CAAC;QAAE,GAAGF,IAAI;QAAEM,OAAO,EAAEQ,CAAC,CAACR;MAAQ,CAAC,CAAC;IAC/C,CAAC,MAAMoB,KAAK,CAACZ,CAAC,CAACa,KAAK,IAAI,eAAe,CAAC;EAC1C;EAEA,oBACE7B,OAAA;IAAAoC,QAAA,gBACEpC,OAAA;MAAKqC,SAAS,EAAC,WAAW;MAAAD,QAAA,gBACxBpC,OAAA;QAAKqC,SAAS,EAAC,WAAW;QAAAD,QAAA,gBACxBpC,OAAA;UAAKqC,SAAS,EAAC,aAAa;UAAAD,QAAA,EAAC;QAAK;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACxCzC,OAAA;UAAK0C,KAAK,EAAE;YAACC,QAAQ,EAAC,EAAE;YAACC,UAAU,EAAC;UAAG,CAAE;UAAAR,QAAA,EAAElC,IAAI,CAAC2C;QAAI;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxD,CAAC,eACNzC,OAAA;QAAKqC,SAAS,EAAC,WAAW;QAAAD,QAAA,gBACxBpC,OAAA;UAAKqC,SAAS,EAAC,aAAa;UAAAD,QAAA,EAAC;QAAO;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC1CzC,OAAA;UAAK0C,KAAK,EAAE;YAACC,QAAQ,EAAC,EAAE;YAACC,UAAU,EAAC;UAAG,CAAE;UAAAR,QAAA,GAAC,SAAE,EAAC5B,OAAO,CAACsC,OAAO,CAAC,CAAC,CAAC;QAAA;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENzC,OAAA;MAAKqC,SAAS,EAAC,KAAK;MAAAD,QAAA,gBAClBpC,OAAA;QAAKqC,SAAS,EAAC,KAAK;QAAAD,QAAA,eAClBpC,OAAA,CAACH,cAAc;UAACkD,KAAK,EAAE5B,cAAe;UAAC6B,OAAO,EAAEd;QAAM;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtD,CAAC,eACNzC,OAAA;QAAKqC,SAAS,EAAC,KAAK;QAAAD,QAAA,eAClBpC,OAAA,CAACF,eAAe;UAACQ,YAAY,EAAEA,YAAa;UAAC2C,QAAQ,EAAEnB;QAAkB;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACpC,EAAA,CA5FuBJ,SAAS;AAAAiD,EAAA,GAATjD,SAAS;AAAA,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}